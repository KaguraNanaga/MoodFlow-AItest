# MoodFlow AI - 情绪音乐流

MoodFlow AI是一个基于AI生成音乐的网页应用，可以根据用户选择的情绪或场景实时生成个性化、无限播放的背景音乐流。

## 功能特点

- 🎵 基于情绪/场景实时生成AI音乐
- 🔄 无缝连续播放，自动生成新音乐
- 🎨 直观的情绪选择界面
- 🎚️ 简单易用的播放控制
- 🖥️ 响应式设计，适配各种设备

## 技术实现

- 前端：纯HTML、CSS和JavaScript
- AI模型：使用Replicate平台上的minimax/music-01模型
- API调用：通过Replicate API接口生成音乐

## 使用方法

### 1. 获取Replicate API密钥

在使用本应用前，你需要:

1. 前往[Replicate](https://replicate.com/)创建账户
2. 登录后，在个人账户设置中创建并获取API密钥

### 2. 运行应用

有两种方式运行本应用:

#### 方法一：使用Python简易HTTP服务器（推荐）

1. 下载或克隆本仓库
2. 确保安装了Python（Python 3.x 或 2.x 均可）
3. 在命令行（终端或命令提示符）中，进入项目文件夹：
   ```
   cd path/to/moodflow-ai
   ```
4. 运行以下命令启动本地服务器：
   ```
   # Python 3.x
   python -m http.server 8000
   
   # Python 2.x
   python -m SimpleHTTPServer 8000
   ```
5. 在浏览器中访问 `http://localhost:8000`

#### 方法二：直接打开HTML文件

1. 下载或克隆本仓库
2. 在浏览器中打开`index.html`文件
3. **注意**：由于浏览器安全策略限制，直接打开HTML文件可能导致API请求失败。如果遇到"跨域请求被阻止"或"音乐生成失败"等错误，请使用方法一中的本地服务器方式运行应用。

### 3. 设置API密钥

首次使用应用时，你需要设置Replicate API密钥：

1. 首次运行时，系统会自动弹出API密钥输入对话框
2. 在对话框中输入你的Replicate API密钥
3. 点击"保存并继续"按钮
4. API密钥将安全地存储在浏览器的本地存储中（localStorage）
5. 如果需要更换API密钥，可以点击页面底部的"重置API密钥"链接

### 4. 使用应用

1. 在主界面选择一种情绪/场景卡片
2. 系统将开始生成并播放对应情绪的音乐（首次生成可能需要几分钟时间）
3. 使用播放控制按钮暂停/播放音乐
4. 点击"切换情绪"按钮可以返回选择不同的情绪

### 常见问题解决

1. **音乐生成失败**：
   - 确保您的API密钥正确无误
   - 检查网络连接是否正常
   - 确认您的Replicate账户有足够的API调用额度

2. **跨域请求被阻止**：
   - 如果直接打开HTML文件遇到跨域问题，请使用Python简易HTTP服务器运行应用
   - 确保您的浏览器没有禁止跨域请求的插件或设置

3. **无法保存API密钥**：
   - 确保浏览器没有禁用localStorage
   - 尝试使用隐身/无痕模式可能会导致此问题，建议使用普通浏览模式

4. **播放卡顿或中断**：
   - 这可能是由于网络连接不稳定导致的
   - 等待当前音乐生成完成后再尝试操作

## 部署到云服务

要将MoodFlow AI部署到云端，可以选择以下几种方式：

### 方法一：使用静态网站托管服务（推荐）

#### GitHub Pages 部署

1. 创建一个GitHub仓库
2. 将项目文件上传到仓库
3. 在仓库设置中启用GitHub Pages
4. 选择主分支作为源
5. 访问`https://your-username.github.io/your-repo-name`

#### Netlify 部署

1. 注册/登录 [Netlify](https://www.netlify.com/)
2. 点击"New site from Git"
3. 选择你的代码仓库
4. 设置构建命令（本项目不需要，可以留空）
5. 点击"Deploy site"

#### Vercel 部署

1. 注册/登录 [Vercel](https://vercel.com/)
2. 导入你的项目仓库
3. 配置部署选项（默认即可）
4. 点击"Deploy"

### 方法二：使用传统Web托管服务

1. 注册一个Web托管服务（如阿里云、腾讯云等）
2. 创建一个静态网站空间
3. 上传项目文件到服务器
4. 配置域名（如果需要）
5. 访问你的网站

### 注意事项

- 所有API调用都在客户端进行，Replicate API密钥存储在用户的本地浏览器中
- 为了保护API密钥，在生产环境中，最好创建一个后端API代理服务来处理Replicate API调用
- 如果你的网站流量较大，请考虑Replicate API的使用限制和费用

## 自定义开发

### 添加新情绪/场景

在`js/api.js`文件中扩展`MOOD_PROMPTS`和`MOOD_NAMES`对象，然后在`index.html`中添加相应的卡片。

### 更改生成参数

可以在`js/api.js`文件中的`generateMusic`函数中修改调用参数，如生成时长等。

### 添加预览音频

1. 为每种情绪生成短音频样本
2. 将样本文件放入`assets/previews/`目录
3. 确保文件名与`js/app.js`中的`previewAudios`对象匹配

## 许可证

MIT

---

*本项目仅为演示用途，实际应用中请确保遵守Replicate的使用条款和相关法律法规。* 